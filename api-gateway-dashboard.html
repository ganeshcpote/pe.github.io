<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TruePass - API Gateway Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            color: #333;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
        }

        .header-stats {
            display: flex;
            gap: 30px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.9;
        }

        .main-container {
            display: flex;
            min-height: calc(100vh - 80px);
        }

        .sidebar {
            width: 250px;
            background: white;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            padding: 20px 0;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }

        .nav-item:hover {
            background: #f8f9fa;
        }

        .nav-item.active {
            background: #e3f2fd;
            border-left-color: #2196f3;
            color: #1976d2;
        }

        .nav-icon {
            margin-right: 12px;
            font-size: 18px;
        }

        .content-area {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .page-title {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 30px;
            color: #2c3e50;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 1px solid #e9ecef;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
        }

        .card-icon {
            font-size: 24px;
            color: #667eea;
        }

        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px 0;
            border-bottom: 1px solid #f1f3f4;
        }

        .metric:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .metric-label {
            color: #666;
            font-size: 14px;
        }

        .metric-value {
            font-weight: 600;
            font-size: 16px;
        }

        .metric-value.success {
            color: #27ae60;
        }

        .metric-value.warning {
            color: #f39c12;
        }

        .metric-value.danger {
            color: #e74c3c;
        }

        .chart-container {
            height: 200px;
            background: #f8f9fa;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 14px;
        }

        .request-log {
            max-height: 400px;
            overflow-y: auto;
        }

        .log-entry {
            display: flex;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid #f1f3f4;
            font-size: 13px;
        }

        .log-entry:last-child {
            border-bottom: none;
        }

        .log-time {
            color: #666;
            min-width: 80px;
            margin-right: 15px;
        }

        .log-method {
            min-width: 60px;
            margin-right: 15px;
            font-weight: 600;
        }

        .log-method.get {
            color: #27ae60;
        }

        .log-method.post {
            color: #3498db;
        }

        .log-method.put {
            color: #f39c12;
        }

        .log-method.delete {
            color: #e74c3c;
        }

        .log-endpoint {
            flex: 1;
            margin-right: 15px;
            font-family: 'Courier New', monospace;
        }

        .log-status {
            min-width: 50px;
            text-align: center;
            font-weight: 600;
        }

        .log-status.success {
            color: #27ae60;
        }

        .log-status.error {
            color: #e74c3c;
        }

        .log-status.warning {
            color: #f39c12;
        }

        .service-status {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .status-online {
            background: #27ae60;
            animation: pulse 2s infinite;
        }

        .status-offline {
            background: #e74c3c;
        }

        .status-warning {
            background: #f39c12;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .service-name {
            font-weight: 600;
            margin-right: 10px;
        }

        .service-url {
            color: #666;
            font-size: 12px;
            font-family: 'Courier New', monospace;
        }

        .rate-limit-bar {
            background: #f1f3f4;
            border-radius: 4px;
            height: 8px;
            margin-top: 5px;
            overflow: hidden;
        }

        .rate-limit-fill {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #f39c12, #e74c3c);
            transition: width 0.3s ease;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .alert-warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .alert-danger {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .alert-icon {
            margin-right: 10px;
            font-size: 18px;
        }

        .hidden {
            display: none;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .filter-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            align-items: center;
        }

        .filter-input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .table th,
        .table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #f1f3f4;
        }

        .table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        .table tr:hover {
            background: #f8f9fa;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">üõ°Ô∏è API Gateway Dashboard</div>
            <div class="header-stats">
                <div class="stat-item">
                    <div class="stat-value" id="total-requests">1,247</div>
                    <div class="stat-label">Requests/min</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="success-rate">99.2%</div>
                    <div class="stat-label">Success Rate</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="avg-response">45ms</div>
                    <div class="stat-label">Avg Response</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="active-connections">156</div>
                    <div class="stat-label">Active Connections</div>
                </div>
            </div>
        </div>
    </div>

    <div class="main-container">
        <div class="sidebar">
            <div class="nav-item active" onclick="showPage('overview')">
                <div class="nav-icon">üìä</div>
                <div>Overview</div>
            </div>
            <div class="nav-item" onclick="showPage('requests')">
                <div class="nav-icon">üìù</div>
                <div>Request Logs</div>
            </div>
            <div class="nav-item" onclick="showPage('services')">
                <div class="nav-icon">üîó</div>
                <div>Service Status</div>
            </div>
            <div class="nav-item" onclick="showPage('security')">
                <div class="nav-icon">üîí</div>
                <div>Security</div>
            </div>
            <div class="nav-item" onclick="showPage('rate-limiting')">
                <div class="nav-icon">‚è±Ô∏è</div>
                <div>Rate Limiting</div>
            </div>
            <div class="nav-item" onclick="showPage('analytics')">
                <div class="nav-icon">üìà</div>
                <div>Analytics</div>
            </div>
        </div>

        <div class="content-area">
            <!-- Overview Page -->
            <div id="overview-page">
                <h1 class="page-title">API Gateway Overview</h1>
                
                <div class="alert alert-warning">
                    <div class="alert-icon">‚ö†Ô∏è</div>
                    <div>High traffic detected on Face Recognition Service. Consider scaling up.</div>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Request Statistics</div>
                            <div class="card-icon">üìä</div>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Total Requests (24h)</span>
                            <span class="metric-value">1,247,892</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Successful Requests</span>
                            <span class="metric-value success">1,238,156</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Failed Requests</span>
                            <span class="metric-value danger">9,736</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Average Response Time</span>
                            <span class="metric-value">45ms</span>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Service Health</div>
                            <div class="card-icon">‚ù§Ô∏è</div>
                        </div>
                        <div class="service-status">
                            <div class="status-indicator status-online"></div>
                            <div class="service-name">User Service</div>
                            <div class="service-url">/api/users</div>
                        </div>
                        <div class="service-status">
                            <div class="status-indicator status-warning"></div>
                            <div class="service-name">Face Recognition</div>
                            <div class="service-url">/api/face</div>
                        </div>
                        <div class="service-status">
                            <div class="status-indicator status-online"></div>
                            <div class="service-name">Merchant Service</div>
                            <div class="service-url">/api/merchants</div>
                        </div>
                        <div class="service-status">
                            <div class="status-indicator status-online"></div>
                            <div class="service-name">Notification Service</div>
                            <div class="service-url">/api/notifications</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Request Distribution</div>
                            <div class="card-icon">üìà</div>
                        </div>
                        <div class="chart-container">
                            üìä Request Distribution Chart
                            <br><small>Face Recognition: 45% | User Service: 30% | Merchant: 20% | Notifications: 5%</small>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Security Metrics</div>
                            <div class="card-icon">üîí</div>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Blocked Requests</span>
                            <span class="metric-value danger">1,234</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Rate Limit Hits</span>
                            <span class="metric-value warning">456</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Invalid Tokens</span>
                            <span class="metric-value danger">89</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Suspicious Activity</span>
                            <span class="metric-value warning">12</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Request Logs Page -->
            <div id="requests-page" class="hidden">
                <h1 class="page-title">Request Logs</h1>
                
                <div class="filter-bar">
                    <input type="text" class="filter-input" placeholder="Filter by endpoint..." id="endpoint-filter">
                    <select class="filter-input" id="method-filter">
                        <option value="">All Methods</option>
                        <option value="GET">GET</option>
                        <option value="POST">POST</option>
                        <option value="PUT">PUT</option>
                        <option value="DELETE">DELETE</option>
                    </select>
                    <select class="filter-input" id="status-filter">
                        <option value="">All Status</option>
                        <option value="200">200 OK</option>
                        <option value="400">400 Bad Request</option>
                        <option value="401">401 Unauthorized</option>
                        <option value="500">500 Server Error</option>
                    </select>
                    <button class="btn btn-primary" onclick="refreshLogs()">Refresh</button>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Live Request Log</div>
                        <div class="card-icon">üìù</div>
                    </div>
                    <div class="request-log" id="request-log">
                        <div class="log-entry">
                            <div class="log-time">14:32:15</div>
                            <div class="log-method post">POST</div>
                            <div class="log-endpoint">/api/face/match</div>
                            <div class="log-status success">200</div>
                        </div>
                        <div class="log-entry">
                            <div class="log-time">14:32:14</div>
                            <div class="log-method get">GET</div>
                            <div class="log-endpoint">/api/users/profile</div>
                            <div class="log-status success">200</div>
                        </div>
                        <div class="log-entry">
                            <div class="log-time">14:32:13</div>
                            <div class="log-method post">POST</div>
                            <div class="log-endpoint">/api/merchants/scan</div>
                            <div class="log-status success">200</div>
                        </div>
                        <div class="log-entry">
                            <div class="log-time">14:32:12</div>
                            <div class="log-method get">GET</div>
                            <div class="log-endpoint">/api/notifications/send</div>
                            <div class="log-status success">200</div>
                        </div>
                        <div class="log-entry">
                            <div class="log-time">14:32:11</div>
                            <div class="log-method post">POST</div>
                            <div class="log-endpoint">/api/face/register</div>
                            <div class="log-status error">500</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Service Status Page -->
            <div id="services-page" class="hidden">
                <h1 class="page-title">Service Status</h1>
                
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">User Service</div>
                            <div class="card-icon">üë§</div>
                        </div>
                        <div class="service-status">
                            <div class="status-indicator status-online"></div>
                            <div class="service-name">Status: Online</div>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Response Time</span>
                            <span class="metric-value success">23ms</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Uptime</span>
                            <span class="metric-value">99.9%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Requests/min</span>
                            <span class="metric-value">234</span>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Face Recognition Service</div>
                            <div class="card-icon">üîç</div>
                        </div>
                        <div class="service-status">
                            <div class="status-indicator status-warning"></div>
                            <div class="service-name">Status: High Load</div>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Response Time</span>
                            <span class="metric-value warning">156ms</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Uptime</span>
                            <span class="metric-value">99.7%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Requests/min</span>
                            <span class="metric-value">567</span>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Merchant Service</div>
                            <div class="card-icon">üè™</div>
                        </div>
                        <div class="service-status">
                            <div class="status-indicator status-online"></div>
                            <div class="service-name">Status: Online</div>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Response Time</span>
                            <span class="metric-value success">34ms</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Uptime</span>
                            <span class="metric-value">99.8%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Requests/min</span>
                            <span class="metric-value">123</span>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Notification Service</div>
                            <div class="card-icon">üîî</div>
                        </div>
                        <div class="service-status">
                            <div class="status-indicator status-online"></div>
                            <div class="service-name">Status: Online</div>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Response Time</span>
                            <span class="metric-value success">67ms</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Uptime</span>
                            <span class="metric-value">99.9%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Requests/min</span>
                            <span class="metric-value">89</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Rate Limiting Page -->
            <div id="rate-limiting-page" class="hidden">
                <h1 class="page-title">Rate Limiting</h1>
                
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Current Limits</div>
                            <div class="card-icon">‚è±Ô∏è</div>
                        </div>
                        <div class="metric">
                            <span class="metric-label">User API (per minute)</span>
                            <span class="metric-value">1000</span>
                            <div class="rate-limit-bar">
                                <div class="rate-limit-fill" style="width: 23%"></div>
                            </div>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Face Recognition (per minute)</span>
                            <span class="metric-value">500</span>
                            <div class="rate-limit-bar">
                                <div class="rate-limit-fill" style="width: 67%"></div>
                            </div>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Merchant API (per minute)</span>
                            <span class="metric-value">2000</span>
                            <div class="rate-limit-bar">
                                <div class="rate-limit-fill" style="width: 12%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Rate Limit Violations</div>
                            <div class="card-icon">üö´</div>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Today's Violations</span>
                            <span class="metric-value danger">456</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Top Violator IP</span>
                            <span class="metric-value">192.168.1.100</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Blocked Requests</span>
                            <span class="metric-value danger">89</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Security Page -->
            <div id="security-page" class="hidden">
                <h1 class="page-title">Security Dashboard</h1>
                
                <div class="alert alert-danger">
                    <div class="alert-icon">üö®</div>
                    <div>Multiple failed authentication attempts detected from IP 192.168.1.100</div>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Authentication</div>
                            <div class="card-icon">üîê</div>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Valid Tokens</span>
                            <span class="metric-value success">1,234</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Invalid Tokens</span>
                            <span class="metric-value danger">89</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Expired Tokens</span>
                            <span class="metric-value warning">156</span>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Threat Detection</div>
                            <div class="card-icon">üõ°Ô∏è</div>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Blocked IPs</span>
                            <span class="metric-value danger">12</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Suspicious Requests</span>
                            <span class="metric-value warning">34</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">DDoS Attempts</span>
                            <span class="metric-value danger">3</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Page -->
            <div id="analytics-page" class="hidden">
                <h1 class="page-title">Analytics</h1>
                
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Traffic Trends</div>
                            <div class="card-icon">üìà</div>
                        </div>
                        <div class="chart-container">
                            üìä Traffic Trends Chart
                            <br><small>Peak hours: 2-4 PM | Lowest: 2-6 AM</small>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Top Endpoints</div>
                            <div class="card-icon">üéØ</div>
                        </div>
                        <div class="metric">
                            <span class="metric-label">/api/face/match</span>
                            <span class="metric-value">45%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">/api/users/profile</span>
                            <span class="metric-value">30%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">/api/merchants/scan</span>
                            <span class="metric-value">20%</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">/api/notifications/send</span>
                            <span class="metric-value">5%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showPage(pageName) {
            // Hide all pages
            document.querySelectorAll('[id$="-page"]').forEach(page => {
                page.classList.add('hidden');
            });

            // Show selected page
            document.getElementById(pageName + '-page').classList.remove('hidden');

            // Update navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.nav-item').classList.add('active');
        }

        function refreshLogs() {
            const logContainer = document.getElementById('request-log');
            const now = new Date();
            
            // Add new log entry
            const newEntry = document.createElement('div');
            newEntry.className = 'log-entry';
            newEntry.innerHTML = `
                <div class="log-time">${now.toLocaleTimeString()}</div>
                <div class="log-method post">POST</div>
                <div class="log-endpoint">/api/face/match</div>
                <div class="log-status success">200</div>
            `;
            
            logContainer.insertBefore(newEntry, logContainer.firstChild);
            
            // Remove oldest entry if more than 10
            const entries = logContainer.querySelectorAll('.log-entry');
            if (entries.length > 10) {
                entries[entries.length - 1].remove();
            }
        }

        // Simulate real-time updates
        setInterval(() => {
            // Update header stats
            const totalRequests = document.getElementById('total-requests');
            const successRate = document.getElementById('success-rate');
            const avgResponse = document.getElementById('avg-response');
            const activeConnections = document.getElementById('active-connections');

            // Simulate changing values
            const requests = Math.floor(Math.random() * 100) + 1200;
            const rate = (99 + Math.random()).toFixed(1);
            const response = Math.floor(Math.random() * 20) + 40;
            const connections = Math.floor(Math.random() * 50) + 140;

            totalRequests.textContent = requests.toLocaleString();
            successRate.textContent = rate + '%';
            avgResponse.textContent = response + 'ms';
            activeConnections.textContent = connections;
        }, 5000);

        // Auto-refresh logs every 10 seconds
        setInterval(refreshLogs, 10000);
    </script>
</body>
</html>
